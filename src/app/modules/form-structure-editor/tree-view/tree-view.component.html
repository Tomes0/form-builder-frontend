<div class="h-10 border-gray-300 border-b">
    <button
        (click)="nodeService.addRootNode()"
        pButton
        pRipple
        label="Create New Form"
        class="p-button-text pe-1 w-full"
        icon="pi pi-plus"
    ></button>
</div>

<p-tree
    *ngIf="roots$ | async as roots; else noDb"
    class="h-full tree"
    [value]="roots"
    selectionMode="single"
    [(selection)]="selectedNode"
    [draggableNodes]="true"
    [droppableNodes]="true"
    (onNodeSelect)="nodeService.selectNode($event)"
    [contextMenu]="actions"
    [scrollHeight]="scrollHeight - 80 + 'px'"
    [style.max-height]="scrollHeight - 80 + 'px'">

    <ng-template let-node pTemplate="empty">
        <div class="flex justify-center">
            <div>
                <h2 class="py-12">Tree is empty</h2>
            </div>
        </div>
    </ng-template>

</p-tree>
<p-contextMenu #actions [model]="actionList"></p-contextMenu>

<ng-template #noDb>
    <div class="flex justify-center">
        <div>
            <h2 class="py-12">Failed to fetch data</h2>
        </div>
    </div>
</ng-template>
